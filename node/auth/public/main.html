<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Main Page</title>
    <link type="text/css" rel="stylesheet" href="mystyle.css" />
    <script>
      function getParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)'),
          results = regex.exec(location.search);
        return results === null
          ? ''
          : decodeURIComponent(results[1].replace(/\+/g, ' '));
      }
      let id = getParameter('id');
      let now = new Date();
      function login() {
        if (!window.sessionStorage) {
          alert('세션 스토리지를 지원하지 않습니다.');
          return;
        }
        if (id == '') {
          sessionStorage.removeItem('');
          alert('잘못된 접근 방식입니다.');
          location.href = 'index.html';
        } else {
          sessionStorage.setItem(id, now);
          alert(`사용자 ${id} 님이 로그인 하셨습니다.`);
        }
      }

      window.addEventListener('beforeunload', event => {
        event.preventDefault();
        event.returnValue = '';
      });

      function logout() {
        sessionStorage.removeItem(id);
      }
    </script>
  </head>
  <body class="body" onload="login()" onunload="logout()">
    <div class="blur"><h3>Main Page</h3></div>
    <nav id="menubar">
      <ul>
        <li><a href="main.html" target="main">Home</a></li>
        <li><a href="aboutme.html">About Me</a></li>
        <li overflow:hidden;></li>
        <li overflow:hidden;></li>
        <li overflow:hidden;></li>
        <!-- <li><a href="index.html" id="logout">Logout</a></li> -->
        <li><a href="index.html">Logout</a></li>
      </ul>
    </nav>
    <hr />
    <br />
    <div class="p2">와주셔서 대단히 감사합니다.</div>
    <video src="media/thanks.mp4" width="700" height="500" controls></video>
    <br />
    <br />
    <hr />

    <div class="img">@Ungdii95</div>
    <!-- <script>
      let id = getParameter('id');
      let logout = document.getElementById('logout');
      logout.addEventListener('click', event => {
        // event.preventDefault();
        sessionStorage.removeItem(id);
        alert(`사용자 ${id} 님이 로그아웃 하셨습니다.`);
      });
    </script> -->
  </body>
</html>
